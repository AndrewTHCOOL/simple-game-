<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>JS Game</title>
  </head>
  <body>
    <script type="application/javascript">
      //Galimų žodžių masyvas
      var zodziai = ['Klaipėda', 'Vilnius', 'Kaunas'];

      // Žaidimo kūrimo ciklas
      var zaidziamVel = true;
      while (zaidziamVel) {
        // Sugeneruoju random skaičių, kuris bus naudojamas kaip indeksas pasirinkti vieną iš galimų žodžių 
        // zodziai masyve.
        var indeksas = Math.floor( Math.random()*zodziai.length );

        var pasirinktasZodis = zodziai[indeksas].toUpperCase();

        // Leist vartotojui pasiūlyti žodį
        var arNoriPasiulyti = confirm("Ar norite pasiūlyti savo žodį?");
        if (arNoriPasiulyti) {
            var siulomasZodis = prompt("Įveskite žodį:");
            if ( siulomasZodis != null && isNaN(siulomasZodis) && siulomasZodis.length > 1){
              pasirinktasZodis =  siulomasZodis.toUpperCase();
            }
        }
            
        // Susikuriu uždengtą žodį
        var rodomasZodis = [];
        for (var i=0; i<pasirinktasZodis.length; i++) {
          rodomasZodis[i] = '_';
        }
        // Kintamasis, kuriame saugome kiek raidžių vartotojas jau atspėjo
        var atspetos = 0;
        // Žaidimo ciklas
        while (atspetos!=pasirinktasZodis.length) {
          
          var dabartinisRezultas = rodomasZodis.join(' ');
          // Parodau dabartinį rezultatą
          alert("Atspėkite žodį:\n" +dabartinisRezultas);
          
          // Paimu spėjimą iš vartotojo
          var spejimas = prompt("Įveskite raidę:");
          // Jei vartotojas nespėjo, tai išeinu iš žaidimo ciklo.
          if (spejimas == null) {
            break;
          }
          // Patikrinu ar įvestas spėjimas yra tik viena raidė. Jei ne, tai pradedu žaidimo cikla nuo pradžių.
          if (spejimas.length != 1 ) {
              alert("Įveskite tik vieną raidę!");
              continue;
          }
        
          spejimas = spejimas.toUpperCase();
          // Tikrinu ar vartotojas atspėjo.
          for (var i=0; i<pasirinktasZodis.length; i++) {
            if (spejimas == pasirinktasZodis[i]) {
              // Patikrinu ar atspėta raidė dar nėra atidengta
              if (rodomasZodis[i] != pasirinktasZodis[i]) {
                // Jeigu raidė nebuvo atidengta, ją atidengiu
                rodomasZodis[i] = pasirinktasZodis[i];
                // Pridedu vieną prie atspėtų raidžių kiekio.
                atspetos++;
              }
            }
          }
        }
        // Jei vartotojas atspėjo pilnai žodį pasveikinu, jei ne išvedu koks tai buvo žodis. 
        if (atspetos == pasirinktasZodis.length) {
            alert("Atspėjote!\nŽodis buvo: " + pasirinktasZodis);
        } else {
            alert("Žodis buvo: " + pasirinktasZodis);
        }
        // Klausiu ar vartotojas nori vėl žaist.
        zaidziamVel = confirm("Ar norite žaisti iš naujo?");
      }
    </script>
  </body>
</html>
